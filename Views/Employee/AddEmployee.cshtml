@model EmployeeCRUD.Models.EmpModel


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <head>
        <meta name="viewport" content="width=device-width" />
        <title>Index</title>
        <script src="~/script/jquery-3.3.1.min.js"></script>
        <script>
            $(document).ready(function () {
                $("#Country").change(function () {
                    var id = $(this).val();
                    $("#state").empty();
                    $.get("State_Bind", { country_id: id }, function (data) {
                        var v = "<option>---Select---</option>";
                        $.each(data, function (i, v1) {
                            v += "<option value=" + v1.Value + ">" + v1.Text + "</option>";
                        });
                        $("#state").html(v);
                    });
                });

                $("#state").change(function () {
                    var id = $(this).val();
                    $("#city").empty();
                    $.get("City_Bind", { state_id: id }, function (data) {
                        var v = "<option>---Select---</option>";
                        $.each(data, function (i, v1) {
                            v += "<option value=" + v1.Value + ">" + v1.Text + "</option>";
                        });
                        $("#city").html(v);
                    });
                });
            });
        </script>
    </head>
    <div class="form-horizontal">
        <h4>Add  Employee</h4>
        <div>
            @Html.ActionLink("Back to Employee List", "GetAllEmpDetails")
        </div>  <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })


        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
            </div>
        </div>       

        <div>
            <div>
                <b>Country: </b>
                @Html.DropDownList("Country", null, "---Select Country----")<br />
            </div>
            <div>
                <b>State: </b>
                <select id="state"></select><br />
            </div>
            <div>
                <b>City: </b>
                <select id="city"></select><br />
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Save" class="btn btn-default" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10" style="color:green">
                @ViewBag.Message

            </div>
        </div>
    </div>

}

<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 